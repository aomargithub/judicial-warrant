<div>
        <div class="page-header">
                <h3>{{messages.ENTITLEDREGISTRATION}}</h3>  
        </div>
    <message-drtv close-callback="entitledRegistrationDrtvCtrl.closeMessage" 
                  refetch-callback = "entitledRegistrationDrtvCtrl.refetch" 
                  message="entitledRegistrationDrtvCtrl.message" 
                  ng-if="entitledRegistrationDrtvCtrl.message" 
                  edit-id="entitledRegistrationDrtvCtrl.entitledRegistration.id"
                  class="message-bar" >
    </message-drtv>
    <div class="btn-group btn-group-justified">
        <form name="entitledRegistrationForm" novalidate> 
            <div class="row">
                    <div class="form-group col-md-6">
                            <label for="capacityDelegation" class="required"> {{messages.label.JobTitle}} </label>
                            <select class="form-control choice requiredField" ng-options="capacityDelegation as capacityDelegation.jobTitle for capacityDelegation in entitledRegistrationDrtvCtrl.capacityDelegations track by capacityDelegation.id" ng-model="entitledRegistrationDrtvCtrl.entitledRegistration.capacityDelegation" nonvalidate required>
                                <option value="" disabled selected>{{messages.placeHolders.selectMessage}}</option>
                            </select>
                            <span ng-show="entitledRegistrationForm.capacityDelegation.$touched && entitledRegistrationForm.capacityDelegation.$error.required" >
                                {{messages.label.required}}
                            </span>
                        </div>               
        </div>
        <div class="btn-group rigth" >
                <div class="btn-group row" >
                    <div class="col-sm-10">
                        <button ng-click="entitledRegistrationDrtvCtrl.save()" class="btn btn-default" ng-disabled="entitledRegistrationForm.$invalid" type="submit">{{messages.label.Save}}</button>
                    </div>
                </div>
                 <!-- submission dialog -->
                 <div class="btn-group row" >
                        <div class="col-sm-10">
                            <button ng-click="" class="btn btn-default" data-toggle="modal" data-target="#myNote" type="submit" ng-disabled="entitledRegistrationDrtvCtrl.entitledRegistration.request.currentStatus.code != 'DRAFT'">{{messages.label.sendRequest}}</button>
                        </div>
                    </div>
                    <div id="myNote" class="modal fade" role="dialog">
                        <div class="modal-dialog">
                            <div class="modal-content">
                            <div class="modal-header">
                                <h3 class="modal-title" id="modal-title">{{messages.label.sendRequest}}</h3>
                            </div>
                            <div class="modal-body" id="modal-body">
                                <form>
                                        <div class="form-group shadow-textarea">
                                                <label for="exampleFormControlTextarea6">{{messages.label.notes}}</label>
                                                <textarea class="form-control z-depth-1" id="note" rows="3" name="note" ng-model="entitledRegistrationDrtvCtrl.entitledRegistrationChangeStatusRequest.note"></textarea>
                                            </div>
                                   
                                    </form>
                            </div>
                            <div class="modal-footer">
                                <button class="btn btn-primary" type="button" data-dismiss="modal" ng-click="entitledRegistrationDrtvCtrl.submission()">{{messages.label.implementRequest}}</button>
                                <button class="btn btn-warning" type="button" data-dismiss="modal">{{messages.label.closePopup}}</button>
                            </div>
                        </div>
                        </div>
                        </div>

                          <!--             -->
            </div>
        </form>


        <button data-toggle="collapse" ng-disabled="!entitledRegistrationDrtvCtrl.entitledRegistration.id" class="accordion" data-target="#bot">{{messages.label.AddAttachmentLable}}</button>
        <div id="bot" class="collapse" ng-show="entitledRegistrationDrtvCtrl.entitledRegistration.id">
        <form   name="entitledRegistrationAttachmentForm" novalidate  enctype="multipart/form-data">
                <div class="row">
                        <div class="form-group col-md-6">
                                <label for="attachmentType" class="required"> {{messages.label.DocumentType}}</label>
                                <select class="form-control choice requiredField" ng-options="attachmentType | localeFltr for attachmentType in entitledRegistrationDrtvCtrl.attachmentTypes track by attachmentType.arabicName" ng-model="entitledRegistrationDrtvCtrl.requestAttachment.attachmentType" novalidate required>
                                    <option value="" disabled selected>{{messages.placeHolders.selectMessage}}</option>
                                </select>
                                <span ng-show="entitledRegistrationAttachmentForm.attachmentType.$touched && entitledRegistrationAttachmentForm.attachmentType.$error.required" >
                                    {{messages.label.required}}
                                </span> 
                            </div>
                             <div class="form-group file-loading" >
                                    <label for="attachmentType" class="required"> {{messages.label.AddAttachment}}</label>
                            <input type="file" id="file" name="file"   ng-file="entitledRegistrationDrtvCtrl.requestAttachment.file"  required/>
                    
                            
                            <span ng-show="entitledRegistrationAttachmentForm.file.$touched && entitledRegistrationAttachmentForm.file.$error.required" >
                                    {{messages.label.required}}
                                </span> 
                            </div>
                         </div>
        
                    
                     <div class="btn-group rigth">
                        <div class="btn-group row">
                            <div class="col-sm-10">
                                <button ng-click="entitledRegistrationDrtvCtrl.addRequestAttachment()" class="btn btn-default" ng-disabled="entitledRegistrationForm.$invalid" type="submit">{{messages.label.add}}</button>
                            </div>
                        </div>
                    </div>
        </form>
    
    <div class="table-responsive" >
        <table class="table table-striped table-bordered table-hover text-center">
            <thead>
                <tr>
                    <th>
                        {{messages.label.DocumentType}}
                    </th>
                    <th>
                        {{messages.label.DocumentName}}
                    </th>
                   
                    <th>
                        {{messages.label.delete}}
                    </th>
                  
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="ra in entitledRegistrationDrtvCtrl.requestAttachments | paginationFltr:entitledRegistrationDrtvCtrl.page.start:entitledRegistrationDrtvCtrl.page.end track by ra.id">
                    <td>
                        {{ra.attachmentType.arabicName}}
                    </td>
                    <td>
                        {{ra.fileName}}
                        <button class="btn btn-default" ng-click="entitledRegistrationDrtvCtrl.showRequestAttachmentImage(ra)"><span class="glyphicon glyphicon-eye-open"></span></button>

                    </td>
                    
                    
                    <td>
                        <div>
                            <button class="btn btn-default" ng-click="entitledRegistrationDrtvCtrl.deleteRequestAttachment(ra.id)"><span class="glyphicon glyphicon-trash"></span></button>
                        </div>
                    </td>
                </tr>
            </tbody> 
        </table>
        <td colspan="7">
            <pagination items-size="entitledRegistrationDrtvCtrl.files.length" page="entitledRegistrationDrtvCtrl.page">
            </pagination>
        </td>
        </div>
    </div>


    <br/>
    <br/>

    <!-- entitled Section -->
    <button data-toggle="collapse" ng-disabled="!entitledRegistrationDrtvCtrl.entitledRegistration.id" class="accordion" data-target="#entitledShow">{{messages.label.addEntitles}}</button>
    <div id="entitledShow" class="collapse" ng-show="entitledRegistrationDrtvCtrl.entitledRegistration.id">

        <form name="entitledForm" novalidate> 
            <div class="row">
                    <div class="form-group col-md-6">
                            <label for="arabicName" class="required">{{messages.label.arabicName}}</label>
                            <input type="text" class="form-control" id="arabicName" name="Arabic Name" ng-model="entitledRegistrationDrtvCtrl.entitled.arabicName" placeholder='Arabic Name' required/>
                    </div>
                    <div class="form-group col-md-6">    
                            <label for="englishName" class="required">{{messages.label.englishName}}</label>
                            <input type="text" class="form-control" id="englishName" name="English Name" ng-model="entitledRegistrationDrtvCtrl.entitled.englishName" placeholder='Arabic Name' required/>

                    </div>
            </div>
            <div class="row">
                    <div class="form-group col-md-6">                
                            <label for="civilId" class="required">{{messages.label.civilId}}</label>
                            <input type="number" class="form-control" id="civilId" name="Civil Id" ng-model="entitledRegistrationDrtvCtrl.entitled.civilId" placeholder='Civil Id' required/>
                    </div>
                    <div class="form-group col-md-6">    
                            <label for="mobileNumber1" class="required"> {{messages.label.mobileNumber1}}</label>
                            <input type="number" class="form-control" id="mobileNumber1" name="mobile Number 1" ng-model="entitledRegistrationDrtvCtrl.entitled.mobileNumber1" placeholder='mobile Number 1' required/>
                    </div>
            </div>             
            <div class="row">
                    <div class="form-group col-md-6">                
                            <label for="mobileNumber2" class="required"> {{messages.label.mobileNumber2}}</label>
                            <input type="number" class="form-control" id="mobileNumber2" name="mobile Number2" ng-model="entitledRegistrationDrtvCtrl.entitled.mobileNumber2" placeholder='mobile Number2' required/>
                    </div>
                    <div class="form-group col-md-6">    
                            <label for="emailAddress" class="required">{{messages.label.emailAddress}}</label>
                            <input type="email" class="form-control" id="emailAddress" name="email Address" ng-pattern="emailPattern" ng-model="entitledRegistrationDrtvCtrl.entitled.emailAddress" placeholder='email Address' required/>
                            <span ng-show="entitledForm.emailAddress.$touched && entitledForm.emailAddress.$error.required" >
                                    {{messages.label.required}}
                                </span>
                                <span ng-show="entitledForm.emailAddress.$error.email && entitledForm.emailAddress.$invalid" >
                                        {{messages.label.emailError}}
                                </span>
                    </div>
            </div>                

                            <span ng-show="entitledForm.entitled.$touched && entitledForm.entitled.$error.required" >
                                {{messages.label.required}}
                            </span>
        <div class="btn-group rigth" >
                <div class="btn-group row" >
                    <div class="col-sm-10">
                        <button ng-click="entitledRegistrationDrtvCtrl.saveEntitled()" class="btn btn-default" ng-disabled="entitledForm.$invalid" type="submit">{{messages.label.Save}}</button>
                    </div>
                </div>
            </div>
        </form>

       


        <div class="table-responsive" >
            <table class="table table-striped table-bordered table-hover text-center">
                <thead>
                    <tr >
                        <th>
                            {{messages.label.arabicName}}
                        </th>
                        <th>
                            {{messages.label.englishName}}
                        </th>
                       
                        <th>
                            {{messages.label.civilId}}
                        </th>
                        <th>
                            {{messages.label.edit}}
                        </th>
                        <th>
                                {{messages.label.delete}}
                        </th>
                        <td>
                            Attachments
                        </td>

                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="e in entitledRegistrationDrtvCtrl.entitleds | paginationFltr:entitledRegistrationDrtvCtrl.page.start:entitledRegistrationDrtvCtrl.page.end track by e.id">
                        <td>
                            {{e.arabicName}}
                        </td>
                        <td>
                            {{e.englishName}}
                        </td>
                        <td>
                            {{e.civilId}}
                        </td>
                        
                        <td>
                            <div>
                                <button class="btn btn-default" ng-click="entitledRegistrationDrtvCtrl.prepareToUpdate(e)"><span class="glyphicon glyphicon-pencil"></span></button>
                            </div>
                        </td>

                        <td>
                            <div>
                                <button class="btn btn-default" ng-click="entitledRegistrationDrtvCtrl.deleteEntitled(e.id)"><span class="glyphicon glyphicon-trash"></span></button>
                            </div>
                        </td>

                        <td>
                            <div class="btn-group row" >
                                <div class="col-sm-10">
                                    <button class="btn btn-default" ng-click="entitledRegistrationDrtvCtrl.prepareToOpenEntitedAttachments(e)"
                                     data-toggle="modal" data-target="#enitledAttachments" >
                                        {{messages.label.AddAttachment}}</button>
                                </div>
                            </div>
                        </td>

                    </tr> 
                      
                </tbody> 
            </table>
            <td colspan="7">
                <pagination items-size="entitledRegistrationDrtvCtrl.files.length" page="entitledRegistrationDrtvCtrl.page">
                </pagination>
            </td>
            </div>

    </div>    


    <!-- entitled Attachments dialog -->
    <div id="enitledAttachments" class="modal fade" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="modal-title">{{messages.label.sendRequest}}</h3>
            </div>
            <div class="modal-body" id="modal-body">
                <form   name="entitledAttachmentForm" novalidate  enctype="multipart/form-data">
                    <div class="row">
                            <div class="form-group col-md-6">
                                    <label for="attachmentType" class="required"> {{messages.label.DocumentName}}</label>
                                    <select class="form-control choice requiredField" ng-options="attachmentType | localeFltr for attachmentType in entitledRegistrationDrtvCtrl.attachmentTypes track by attachmentType.arabicName" ng-model="entitledRegistrationDrtvCtrl.entitledAttachment.attachmentType" novalidate required>
                                        <option value="" disabled selected>{{messages.placeHolders.selectMessage}}</option>
                                    </select>
                                    <span ng-show="entitledAttachmentForm.attachmentType.$touched && entitledAttachmentForm.attachmentType.$error.required" >
                                        {{messages.label.required}}
                                    </span> 
                                </div>
                                 <div class="form-group file-loading" >
                                        <label for="attachmentType" class="required"> {{messages.label.AddAttachment}}</label>
                                <input type="file" id="file" name="file"   ng-file="entitledRegistrationDrtvCtrl.entitledAttachment.file"  required/>
                                                 
                                <span ng-show="entitledAttachmentForm.file.$touched && entitledAttachmentForm.file.$error.required" >
                                        {{messages.label.required}}
                                    </span> 
                                </div>
                             </div>
                            
                         <div class="btn-group rigth">
                            <div class="btn-group row">
                                <div class="col-sm-10">
                                    <button ng-click="entitledRegistrationDrtvCtrl.addEntitledAttachment()" class="btn btn-default" ng-disabled="entitledAttachmentForm.$invalid" type="submit">{{messages.label.add}}</button>
                                </div>
                            </div>
                        </div>
            </form>
        
            <div class="table-responsive" >
                <table class="table table-striped table-bordered table-hover text-center">
                    <thead>
                        <tr>
                            <th>
                                {{messages.label.DocumentType}}
                            </th>
                            <th>
                                {{messages.label.DocumentName}}
                            </th>                         
                            <th>
                                {{messages.label.delete}}
                            </th>                         
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="ea in entitledRegistrationDrtvCtrl.entitledAttachments | paginationFltr:entitledRegistrationDrtvCtrl.page.start:entitledRegistrationDrtvCtrl.page.end track by ea.id"
                        class="accordion-toggle" data-toggle="collapse" data-target="#entitledAttachments">
                            <td>
                                {{ea.attachmentType.arabicName}}
                            </td>
                            <td>
                                {{ea.fileName}}
                                <button class="btn btn-default" ng-click="entitledRegistrationDrtvCtrl.showEntitledAttachmentImage(ea)"><span class="glyphicon glyphicon-eye-open"></span></button>    
                            </td>           
                            <td>
                                <div>
                                    <button class="btn btn-default" ng-click="entitledRegistrationDrtvCtrl.deleteEntitledAttachment(ea.id)"><span class="glyphicon glyphicon-trash"></span></button>
                                </div>
                            </td>
                        </tr> 
                    </tbody> 
                </table>
                <td colspan="7">
                    <pagination items-size="entitledRegistrationDrtvCtrl.files.length" page="entitledRegistrationDrtvCtrl.page">
                    </pagination>
                </td>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-warning" type="button" data-dismiss="modal">{{messages.label.closePopup}}</button>
            </div>
        </div>
        </div>
        </div>



    </div>